{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/tmux-semi-automatizacion/","webpackCompilationHash":"1f1db5f6e372c64d5d80","result":{"data":{"site":{"siteMetadata":{"title":"Este es un Hotfix!","author":"Veronica Clavijo"}},"markdownRemark":{"id":"1b09102c-efba-5df3-8631-6465de57a38e","excerpt":"Desde hace tiempo que uso TMUX para hacer mas efectivo y fluido mi tiempo en la terminal. Como en el trabajo paso la mayor parte del tiempo desarrollando una‚Ä¶","html":"<p>Desde hace tiempo que uso <a href=\"https://github.com/tmux/tmux\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">TMUX</a> para hacer mas efectivo y fluido mi tiempo en la terminal.</p>\n<p>Como en el trabajo paso la mayor parte del tiempo desarrollando una app en React Native mi configuracion de TMUX luce siempre igual y los paneles los uso para los mismos prop√≥sitos. Mis sesiones se ven asi:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"> ------------------------------\n|      1       |               |\n --------------|       3       |\n|      2       |               |\n ------------------------------</code></pre></div>\n<p>El panel 1 se mantiene est√°tico corriendo el metro-bundler de la app.</p>\n<p>El panel 2 lo utilizo para ejecutar <code class=\"language-text\">npx react-native run-{platform}</code> y para comandos git.</p>\n<p>El panel 3 tiene el emulador corriendo.</p>\n<p>Normalmente iniciaba tmux y manualmente constru√≠a los paneles e iniciaba las mismas tareas en cada panel, se hizo repetitivo hacerlo a diario.</p>\n<p>Investigando un poco descubr√≠ que puedo lograr la disposici√≥n de los paneles y las tareas de cada uno con un simple comando al momento de iniciar la sesi√≥n TMUX. Entonces esas son mis dos metas, lograr la estructura del layout e iniciar las tareas en cada panel.</p>\n<h2 id=\"paneles-en-proceso\"><a href=\"#paneles-en-proceso\" aria-label=\"paneles en proceso permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Paneles en proceso‚Ä¶</h2>\n<p>Para lograr el layout de <strong>manera manual</strong> siempre sigo los siguientes pasos:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ tmux          # Inicia sesi√≥n TMUX\nC-b %           # Divide la pantalla en 2 verticalmente\nC-b q 1         # Regresa a la primera mitad\nC-b &quot;           # Divide el primer panel en 2 horizontalmente</code></pre></div>\n<p>Para lograr el layout desde el momento que se inicia la sesi√≥n TMUX la sintaxis es diferente ya que en ese momento no se tiene acceso a los atajos de teclado como son <code class=\"language-text\">C-b</code>y <code class=\"language-text\">M-x</code>, pero tenemos comandos de tmux, necesitamos inicialmente dos (<code class=\"language-text\">split-window</code> y <code class=\"language-text\">select-pane</code>). Como prueba inicial tendremos:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ tmux new-session \\; \\\nsplit-window -h\n\n# Resultado\n ------------------------------\n|              |               |\n|      1       |       2       |\n|              |               |\n ------------------------------</code></pre></div>\n<p>El argumento <code class=\"language-text\">-h</code> indica que la ventana se dividir√° en dos paneles de manera horizontal, el siguiente paso es dividir el Panel 1 en dos paneles verticalmente, por lo que complementando el comando es:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ tmux new-session \\; \\\nsplit-window -h \\; \\\nsplit-window -v \\;\n\n# Resultado\n ------------------------------\n|              |       2       |\n|      1       |---------------|\n|              |       3       |\n ------------------------------</code></pre></div>\n<p>El resultado obtenido hasta el momento no es exactamente lo que busco, pero hay que tomar en cuenta la manera como TMUX funciona, una vez que se divide la pantalla en paneles TMUX escoge el panel activo:</p>\n<ul>\n<li>cuando se divide horizontalmente el panel activo es el de la derecha</li>\n<li>cuando se divide verticalmente el panel activo es el de abajo.</li>\n</ul>\n<p>En este caso dado que ten√≠a dos paneles (1 y 2) separados horizontalmente, el siguiente <code class=\"language-text\">split-window</code> dividir√° el panel 2. La soluci√≥n es seleccionar manualmente el panel 1 antes de dividirlo verticalmente usando el comando <code class=\"language-text\">select-pane</code> como sigue:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ tmux new-session \\; \\\nsplit-window -h \\; \\\nselect-pane -t 1 \\; \\\nsplit-window -v \\;\n\n# Resultado\n ------------------------------\n|      1       |               |\n --------------|       3       |\n|      2       |               |\n ------------------------------</code></pre></div>\n<p>üéâüéâüéâ Listo!, el layout es como quiero‚Ä¶</p>\n<h2 id=\"inicio-de-tareas-en-cada-panel\"><a href=\"#inicio-de-tareas-en-cada-panel\" aria-label=\"inicio de tareas en cada panel permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inicio de tareas en cada panel</h2>\n<p>Ya que el layout est√° listo ahora queda iniciar las tareas en cada panel.</p>\n<ul>\n<li>Panel 1 para iniciar el metro bundler</li>\n<li>Panel 2 para ejecutar <code class=\"language-text\">npx react-native run-{platform}</code></li>\n<li>Panel 3 para ejecutar el emulador</li>\n</ul>\n<p>Para lograrlo se utiliza el comando <code class=\"language-text\">send-keys</code> seguido de <code class=\"language-text\">C-m</code> que es un par√°metro que ejecuta el comando. Cada que se cree un panel iniciaremos su tarea.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ tmux new-session \\; \\\nsend-keys &#39;yarn &amp;&amp; yarn start&#39; C-m \\; \\\nsplit-window -h \\; \\\nsend-keys &#39;androidemu @Pixel3a&#39; C-m \\; \\\nselect-pane -t 1 \\; \\\nsplit-window -v \\; \\\nsend-keys &#39;npx react-native run-android&#39; C-m \\;</code></pre></div>\n<p>üéâüéâüéâ Listo! a√±adiendo <code class=\"language-text\">send-keys</code> cuando se crea cada panel se inicia la tarea de cada uno. Ahora cada vez que quiero iniciar TMUX para trabajar en la app de react-native solo tengo que copiar y pegar ese ultimo comando en una terminal que este en el directorio raiz del proyecto.</p>\n<h2 id=\"mejoras\"><a href=\"#mejoras\" aria-label=\"mejoras permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mejoras</h2>\n<p>Hay un par de detalles que se pueden mejorar, la primera es que tengo que cambiar de directorio a la raiz del proyecto antes de copiar y pegar el comando de TMUX, eso se puede mejorar!. El comando <code class=\"language-text\">new-session</code> tiene disponible la bandera <code class=\"language-text\">-c</code> con la que se puede especificar el directorio en el cual se inicia la sesi√≥n de TMUX, aplicando esto tenemos:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ tmux new-session -c /path/to/react-native-project \\; \\\nsend-keys &#39;yarn &amp;&amp; yarn start&#39; C-m \\; \\\nsplit-window -h \\; \\\nsend-keys &#39;androidemu @Pixel3a&#39; C-m \\; \\\nselect-pane -t 1 \\; \\\nsplit-window -v \\; \\\nsend-keys &#39;npx react-native run-android&#39; C-m \\;</code></pre></div>\n<p>Con el uso de <code class=\"language-text\">-c</code> se ahorra el paso de tener que estar en la raiz del proyecto antes de copiar y pegar el comando de TMUX. Desde cualquier directorio en el que est√© la terminal la sesi√≥n de TMUX iniciar√° en el proyecto deseado.</p>\n<p>La ultima mejora es darle un nombre a la sesi√≥n, la bandera <code class=\"language-text\">-n</code> de <code class=\"language-text\">new-session</code> hace justo esto:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ tmux new-session -n tmux-rules -c /path/to/react-native-project \\; \\\nsend-keys &#39;yarn &amp;&amp; yarn start&#39; C-m \\; \\\nsplit-window -h \\; \\\nsend-keys &#39;androidemu @Pixel3a&#39; C-m \\; \\\nselect-pane -t 1 \\; \\\nsplit-window -v \\; \\\nsend-keys &#39;npx react-native run-android&#39; C-m \\;</code></pre></div>\n<hr>\n<p><strong>MISI√ìN CUMPLIDA</strong></p>\n<p>Este <a href=\"https://gist.github.com/Veuge/4d460396bc459bf23093318f34a8186f\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">gist</a> tiene el resultado final </p>\n<h2 id=\"referencias\"><a href=\"#referencias\" aria-label=\"referencias permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Referencias</h2>\n<ul>\n<li><a href=\"https://github.com/tmux/tmux/wiki/Getting-Started\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">TMUX Wiki</a></li>\n<li><a href=\"https://man7.org/linux/man-pages/man1/tmux.1.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">TMUX Man Page</a></li>\n<li><a href=\"https://stackoverflow.com/questions/5609192/how-to-set-up-tmux-so-that-it-starts-up-with-specified-windows-opened\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Este hilo de StackOverflow</a></li>\n</ul>","frontmatter":{"title":"Semi-automatizaci√≥n de TMUX","date":"November 21, 2020","description":"C√≥mo semi-automatizar el inicio de sesi√≥n de TMUX con una configuraci√≥n de espec√≠fica de paneles y sus tareas con un solo comando!.","tags":["consola"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/tmux-semi-automatizacion/","previous":{"fields":{"slug":"/adb-for-react-native-developers/"},"frontmatter":{"title":"ADB para desarrolladores en React Native"}},"next":null}}}